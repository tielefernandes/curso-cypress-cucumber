# Integração Contínua

A integração contínua é uma prática de desenvolvimento de software onde membros de uma equipe integram seu código frequentemente, geralmente cada um fazendo ao menos uma integração diária, o que leva a múltiplas integrações por dia.

Cada integração é automaticamente verificada por meio de um _build_ (construção do software) e testes automatizados, detectando problemas de integração.

No ecosistema do GitHub, é possível utilizar o serviço [GitHub Actions](https://github.com/features/actions), o qual permite a criação de um _workflow_ de integração contínua.

## Conteúdos sugeridos 📚

- [Documentação oficial do Cypress sobre GitHub Action](https://docs.cypress.io/guides/continuous-integration/github-actions#Cypress-GitHub-Action)
- [Documentação da imagem cypress-io/github-action no GitHub](https://github.com/cypress-io/github-action#readme)

## Exercício 🎯

1. **Na raiz do projeto**, crie um diretório oculto chamado `.github/` e dentro dele, crie um subdiretório chamado `workflows/`.

> 👨‍🏫 Você deve ter a seguinte estrutura `.github/workflows/`

2. Dentro do diretório `.github/workflows/`, crie um arquivo chamado `ci.yml`, com o seguinte conteúdo:

```yml
name: End-to-end Tests
on: push
jobs:
  tests-linux:
    runs-on: ubuntu-22.04
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Run Cypress Tests 🧪
        uses: cypress-io/github-action@v6
      - name: HTML Test Report
        uses: actions/upload-artifact@v4
        if: always()
        with:
          name: test-report-linux
          path: cucumber-report.html
          if-no-files-found: ignore

  tests-windows:
    runs-on: windows-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4
      - name: Run Cypress Tests 🧪
        uses: cypress-io/github-action@v6
      - name: HTML Test Report
        uses: actions/upload-artifact@v4
        if: always()
        with:
          name: test-report-windows
          path: cucumber-report.html
          if-no-files-found: ignore
```

> 👨‍🏫 O arquivo `ci.yml` representa um _workflow_ de integração contínua (_CI_) no GitHub Actions, o qual é responsável por rodar os testes _end-to-end_ em dois sistemas operacionais diferentes paralelamente: Linux e Windows.
>
> Com a execução em diferentes sistemas operacionais, aumenta-se a confiabilidade do projeto, facilitando a identificação de problemas de compatibilidade. Além disso, o _upload_ do relatório dos testes como artefato permite que os resultados sejam facilmente acessados e analisados a cada execução.
>
> 👨‍🏫 O nome do arquivo pode ser qualquer nome aleatório. Escolhi `ci` porque significa integração contínua (em inglês - _continuous integration_).

3. Com o `git`, adicione todas suas alterações à área de _staging_ (`git add .`).
4. Faça um commit com a mensagem `Configure the CI workflow` (`git commit -m "Configure the CI workflow"`.)
5. Envie suas alterações locais para seu fork remoto no GitHub (`git push origin main`.)
6. Acesse o GitHub e veja suas alterações disparando o _workflow_ (e se tudo der certo, veja seus testes passando).

> 👨‍🏫 Lembre-se, você deve estar trabalhando em seu _fork_, de outra forma, não terá permissão para enviar suas mudanças ao GitHub.

7. Após a execução dos testes, baixe os relatórios gerados como artefatos para explorar o resultado dos testes com mais detalhes.

## Conteúdos sugeridos da TAT 📚

- [_Playlist_ de Integração Contínua no Canal TAT no YouTube](https://www.youtube.com/playlist?list=PL-eblSNRj0QHgzdWNkGks9_JdhV9iAwFr)
- [Categoria Integração Contínua no blog Talking About Testing](https://talkingabouttesting.com/category/integracao-continua/)

## Mostre ao mundo o que você aprendeu 🌎

Para mostrar à sua rede profissional o que você aprendeu nesta aula, publique o seguinte no LinkedIn.

> Estou fazendo o curso "Testes End-to-End com Cypress e Cucumber: Guia Definitivo 🥒" da escola online Talking About Testing, onde aprendi como configurar uma esteira de integração contínua que executa os testes paralelamente no Linux e Windows, além de gerar relatórios da execução dos testes como artefatos para análise e investigação. #TalkingAboutTesting #EscolaTAT #Cypress #Cucumber
>
> 👨‍🏫 Lembre-se de me marcar em sua publicação. [Aqui está meu perfil no LinkedIn](https://www.linkedin.com/in/walmyr-lima-e-silva-filho).

___

Agora que o _workflow_ de integração contínua está configurado, vou te apresentar [uma solução simplificada do projeto, porém sem Cucumber](./13.md).

___

[Voltar para a página inicial](../README.md)
