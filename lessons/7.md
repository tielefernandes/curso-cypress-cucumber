# Mapeando uma _feature_ que utiliza uma lista de valores para _step definitions_

Quando um (ou mais) passo(s) de um arquivo `.feature` possui uma lista de valores para iteração, o arquivo de _step definitions_ deve estar preparado para iterar sobre cada item da lista em um mesmo passo.

Usando o exemplo da aula anterior, teríamos algo como o seguinte.

```js
// cypress/e2e/todo.js

import { Given, When, Then } from '@badeball/cypress-cucumber-preprocessor'

Given('I access an empty TODO list', () => {
  cy.visit('https://example.todo.com')
})

When('I create these TODOs', table => {
  table.raw()[0].forEach(todoItem => {
    cy.get('input#new-todo')
      .clear()
      .type(`${todoItem}{enter}`)
  })
})

Then('Then I see {string} items in the TODO list', numOfItems => {
  cy.get('#todo-item')
    .should('have.length', numOfItems)
    .and('be.visible')
})
```

> 👨‍🏫 A função `table.raw()[0]` retorna a primeira linha (`[0]`) da tabela como um _array_, e então, faz um _loop_ neste _array_ para criar TODOs.

## Exercício 🎯

1. Dentro da pasta `cypress/e2e/hackerstories/lastSearches/`, crie um arquivo chamado `lastSearches.js`
2. Mapeie cada passo do arquivo `cypress/e2e/engagesphere/lastSearches/lastSearches.feature` no arquivo `cypress/e2e/engagesphere/lastSearches/lastSearches.js`, passando uma tabela iterável à função de _callback_ da função `When` e um parâmetro (🙊 `numOfButtons`) à função de _callback_ da função `Then`
3. Por fim, execute os testes e siga adiante quando os mesmos estiverem passando.

## Mostre ao mundo o que você aprendeu 🌎

Para mostrar à sua rede profissional o que você aprendeu nesta aula, publique o seguinte no LinkedIn.

> Estou fazendo o curso "Testes End-to-End com Cypress e Cucumber: Guia Definitivo 🥒" da escola online Talking About Testing, onde aprendi a definir _step definitions_ com _arrays_ de dados para iteração. #TalkingAboutTesting #EscolaTAT #Cypress #Cucumber
>
> 👨‍🏫 Lembre-se de me marcar em sua publicação. [Aqui está meu perfil no LinkedIn](https://www.linkedin.com/in/walmyr-lima-e-silva-filho).

___

Com os _step definitions_ prontos, [vamos aprender como usar a palavra-chave _Background_ da linguagem _Gherkin_](./8.md).

___

[Voltar para a página inicial](../README.md)